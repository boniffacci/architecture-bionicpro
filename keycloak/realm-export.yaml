# Имя realm - изолированное пространство для управления пользователями, ролями и клиентами
realm: reports-realm

# Флаг активации realm - определяет, доступен ли realm для использования
enabled: true

# Определение ролей в системе
roles:
  # Роли уровня realm (глобальные роли для всего realm)
  realm:
    # Роль обычного пользователя
    - name: user
      # Описание роли для административных целей
      description: Regular user role
    
    # Роль администратора с расширенными правами
    - name: administrator
      # Описание роли администратора
      description: Administrator role
    
    # Роль для протезных пользователей с доступом к отчетам
    - name: prothetic_user
      # Описание специализированной роли
      description: Prothetic user role with report access

# Список пользователей, предварительно созданных в системе
users:
  # Первый обычный пользователь
  - username: user1
    # Флаг активации учетной записи
    enabled: true
    # Email адрес пользователя
    email: user1@example.com
    # Имя пользователя
    firstName: User
    # Фамилия пользователя
    lastName: One
    # Учетные данные для аутентификации
    credentials:
      # Тип учетных данных (пароль)
      - type: password
        # Значение пароля (в production должно быть зашифровано)
        value: password123
        # Флаг временного пароля (false = постоянный пароль)
        temporary: false
    # Назначенные роли уровня realm
    realmRoles:
      - user
  
  # Второй обычный пользователь
  - username: user2
    # Активация учетной записи
    enabled: true
    # Email адрес
    email: user2@example.com
    # Имя
    firstName: User
    # Фамилия
    lastName: Two
    # Учетные данные
    credentials:
      # Пароль пользователя
      - type: password
        value: password123
        # Постоянный пароль
        temporary: false
    # Роли пользователя
    realmRoles:
      - user
  
  # Первый администратор системы
  - username: admin1
    # Активация учетной записи администратора
    enabled: true
    # Email администратора
    email: admin1@example.com
    # Имя администратора
    firstName: Admin
    # Фамилия администратора
    lastName: One
    # Учетные данные администратора
    credentials:
      # Пароль администратора
      - type: password
        value: admin123
        # Постоянный пароль
        temporary: false
    # Роль администратора
    realmRoles:
      - administrator
  
  # Первый протезный пользователь
  - username: prothetic1
    # Активация учетной записи
    enabled: true
    # Email протезного пользователя
    email: prothetic1@example.com
    # Имя
    firstName: Prothetic
    # Фамилия
    lastName: One
    # Учетные данные
    credentials:
      # Пароль
      - type: password
        value: prothetic123
        # Постоянный пароль
        temporary: false
    # Специализированная роль
    realmRoles:
      - prothetic_user
  
  # Второй протезный пользователь
  - username: prothetic2
    # Активация учетной записи
    enabled: true
    # Email
    email: prothetic2@example.com
    # Имя
    firstName: Prothetic
    # Фамилия
    lastName: Two
    # Учетные данные
    credentials:
      # Пароль
      - type: password
        value: prothetic123
        # Постоянный пароль
        temporary: false
    # Роль протезного пользователя
    realmRoles:
      - prothetic_user
  
  # Третий протезный пользователь
  - username: prothetic3
    # Активация учетной записи
    enabled: true
    # Email
    email: prothetic3@example.com
    # Имя
    firstName: Prothetic
    # Фамилия
    lastName: Three
    # Учетные данные
    credentials:
      # Пароль
      - type: password
        value: prothetic123
        # Постоянный пароль
        temporary: false
    # Роль протезного пользователя
    realmRoles:
      - prothetic_user

# Список клиентских приложений, интегрированных с Keycloak
clients:
  # Клиент для frontend приложения
  - clientId: reports-frontend
    # Активация клиента
    enabled: true
    # Публичный клиент (не требует client secret, используется для SPA)
    publicClient: true
    # Разрешенные URI для редиректа после аутентификации
    redirectUris:
      - http://localhost:3000/*
    # Разрешенные origins для CORS
    webOrigins:
      - http://localhost:3000
    # Разрешение прямого доступа (Resource Owner Password Credentials Grant)
    directAccessGrantsEnabled: true
  
  # Клиент для backend API
  - clientId: reports-api
    # Активация клиента
    enabled: true
    # Тип аутентификации клиента (использование секрета)
    clientAuthenticatorType: client-secret
    # Секретный ключ для аутентификации клиента (должен быть защищен)
    secret: oNwoLQdvJAvRcL89SydqCWCe5ry1jMgq
    # Bearer-only клиент (только проверяет токены, не инициирует аутентификацию)
    bearerOnly: true
